{% extends 'template.html' %}

{% block css %}
<link rel="stylesheet" href="../../static/css/style.css">
{% endblock %}

{% block content %}
  <h2 class="page-title">追加画面</h2>
  <div class="container add_books">
    <div class="flex-wrapper">
      <div id="interactive">
      </div>
      <form action="{{url_for('add_books.add_books')}}" method='POST' class="form-add" id="form-add">
        {% if error!=0 or success!=0 %}
          <div class="form-item">
          {% if error == 1 %}
		  	    <p class="add-error-text">追加に失敗しました。</p>
	    	  {% elif error == 2 %}
	    	    <p class="add-error-text">そのJANコードは既に登録されています</p>
	        {% endif %}
	    	  
          {% if success == 1 %}
	    	    <p>登録しました。</p>
	    	  {% endif %}
          </div>
        {% endif %}
        <p id="add-error-text" class="add-error-text"></p>
        <div class="form-item">
          <label for="book-name">JANコード</label>
          <input type="number" name="jancord" id="jancord">
        </div>
        <div class="form-item">
          <label for="book-name">図書名</label>
          <input type="text" name="book-name" id="book-name">
        </div>
        <div class="form-item">
          <label for="author">著者名</label>
          <input type="text" name="author" id="author">
        </div>
        <div class="form-item">
          <label for="book-amount">冊数</label>
          <input type="number" name="book-amount" id="book-amount" onkeydown="checkKeyCode()">
        </div>
      <button type="button" class="btn" id="register-btn">登録</button>
      </form>
    </div>
  </div>
  <script src="../static/js/add_books.js" type="module"></script>
  <script type="text/javascript" src="../static/js/quagga.min.js" type="module"></script>
    <script>
    function checkKeyCode() {
        if (event.keyCode === 69) {
            event.returnValue = false;
        }
        else if (event.keyCode === 187) {
            event.returnValue = false;
        }
        else if (event.keyCode === 189) {
            event.returnValue = false;
        }
    }
    </script>
{% endblock %}