{% extends 'template.html' %}

{% block css %}
{% endblock %}


{% block title %}
-図書一覧
{% endblock %}


{% block content %}
    <div class="container books_list">
        <div class="flex-wrapper">
            <ul class="books flex-item">
                {% if session['book_list']|length!=0 %}
                <!-- 動的に増える部分 -->
                {% for book in session['book_list'] %}
                <li>
{#                    <a#}
{#                        href="{{url_for('booklist_view.detail_view',jancord=book[0])}}"#}
{#                    >#}
{#                        {{book[1]}}#}
{#                    </a>#}
                    <a class="aTag">
                        {{ book[1] }}
                        <input type="text" name="book_id" value="{{ book[0] }}" hidden>
                    </a>
                </li>
                {% endfor %} {% else %}
                <p>該当なし</p>
                {% endif %}
            </ul>
            <div class="book-detail flex-item">
                {% if sel_book_detail|length!=0 %}
                <div>
                    <label for="name">作品名</label
                    ><input
                        type="text"
                        id="name"
                        value="{{sel_book_detail[1]}}"
                        readonly
                    />
                </div>
                <div>
                    <label for="author">著者名</label
                    ><input
                        type="text"
                        id="author"
                        value="{{sel_book_detail[2]}}"
                        readonly
                    />
                </div>
                <div>
                    <label for="totallable">図書在庫総数</label
                    ><input
                        type="number"
                        id="totallable"
                        value="{{sel_book_detail[3]}}"
                        readonly
                    />
                </div>
                <div>
                    <label for="lentalable">貸出可能数</label
                    ><input
                        type="number"
                        id="lentalable"
                        value="{{sel_book_detail[4]}}"
                        readonly
                    />
                </div>
                <div>
                    {% if session.get('user_id')[0] == '0'  %} <!--? 学籍番号が０から始まるアカウントを管理者(教員)とする -->
                        <a href="{{url_for('booklist_view.edit_view',jancord=sel_book_detail[0])}}" class="btn edit">編集</a>
                    {% endif %}
                </div>
                {% else %}
                <p>図書選択で詳細表示</p>
                {% endif %}
            </div>
        </div>
    </div>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='/js/book_list_ajax.js') }}"></script>
{% endblock %}

{% block javascript %}
    <script src="{{ url_for('static', '/js/book_list_ajax.js') }}"></script>
{% endblock %}